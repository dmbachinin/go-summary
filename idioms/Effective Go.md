# Effective Go

`Effective Go` — это официальное руководство от команды Go, которое описывает лучшие практики, идиомы и правила написания читаемого, поддерживаемого и «идиоматичного» кода на Go.

`ДОКУМЕНТАЦИЯ:` <https://go.dev/doc/effective_go>

## ТОП-10 правил

1. Используй `gofmt` всегда

    Код форматируется автоматически, споры о стиле исключены.

2. Имена должны быть короткими и выразительными

   * переменные `i`, `n`, `ch` допустимы и привычны
   * экспортируемые имена начинаются с **заглавной** буквы
   * внутренние имена — с **маленькой** буквы

3. Ошибки возвращаются как значения (`error`)

    Нет исключений. Ошибки нужно явно проверять.

    ```go
    if err != nil {
        return err
    }
    ```

4. Интерфейсы минимальны

   * проектируются на стороне потребителя
   * реализуются неявно
   * лучше маленький интерфейс, чем универсальный

5. Методы для указателей — если нужно менять состояние

    Если метод изменяет данные в структуре, получатель должен быть `*Type`.

6. Конструкторы пишутся функциями

    Нет `new Class()`, вместо этого функция `NewType()`.

    ```go
    func NewUser(name string) *User {
        return &User{Name: name}
    }
    ```

7. Не используй `getter/setter` без необходимости

    В Go принято экспортировать поле напрямую.

    ```go
    type User struct {
        Name string // экспортируемое поле
    }
    ```

8. Срезы и карты — стандартные коллекции

   * массивы почти не применяются
   * `map` безопасен при чтении из `nil`

9. Используй каналы и горутины для конкурентности

    Правило: *«делись памятью через общение, а не наоборот»*.

10. Комментарии — как документация

    * для экспортируемых символов комментарий начинается с имени
    * пишется не «что делает», а «зачем»

## Нейминг пакетов в Go

**Правила:**

* имя пакета — **одно короткое слово**, строчными буквами
* без подчеркиваний и `camelCase`
* имя должно совпадать с директорией
* обычно **существительное** в единственном числе
* название пакета не должно повторять имя типов внутри него

```go
// Директория: mathutil
package mathutil

// Типы внутри
type Vector struct{}
type Matrix struct{}
```

**Примеры хороших имен:**

* `http`, `json`, `bytes`, `sync`, `time`
* `config`, `cache`, `logger`

**Антипаттерны:**

* `utils`, `common`, `helpers` — слишком размыто
* `MyPackage`, `BestLib` — заглавные буквы и маркетинговые названия не используются
* `stringUtils` — camelCase запрещен
